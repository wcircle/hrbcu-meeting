<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zxy.hrbcu.meeting.dao.TUserSleepingDao" >
  <resultMap id="BaseResultMap" type="com.zxy.hrbcu.meeting.domain.TUserSleeping" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="receive_id" property="receiveId" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="room_no" property="roomNo" jdbcType="VARCHAR" />
    <result column="sleep_date" property="sleepDate" jdbcType="TIMESTAMP" />
    <result column="sleep_order" property="sleepOrder" jdbcType="INTEGER" />
    <result column="create_staff_id" property="createStaffId" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_staff_id" property="updateStaffId" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    id, receive_id, address, room_no, sleep_date, sleep_order, create_staff_id, create_time, 
    update_staff_id, update_time,user_id
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_user_sleeping
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    delete from t_user_sleeping
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insertSelective" parameterType="com.zxy.hrbcu.meeting.domain.TUserSleeping" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    insert into t_user_sleeping
    <trim prefix="(" suffix=")" suffixOverrides="," >
      id,
      <if test="receiveId != null" >
        receive_id,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="address != null" >
        address,
      </if>
      <if test="roomNo != null" >
        room_no,
      </if>
      <if test="sleepDate != null" >
        sleep_date,
      </if>
      <if test="sleepOrder != null" >
        sleep_order,
      </if>
      <if test="createStaffId != null" >
        create_staff_id,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateStaffId != null" >
        update_staff_id,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      #{id,jdbcType=VARCHAR},
      <if test="receiveId != null" >
        #{receiveId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="roomNo != null" >
        #{roomNo,jdbcType=VARCHAR},
      </if>
      <if test="sleepDate != null" >
        #{sleepDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sleepOrder != null" >
        #{sleepOrder,jdbcType=INTEGER},
      </if>
      <if test="createStaffId != null" >
        #{createStaffId,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateStaffId != null" >
        #{updateStaffId,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zxy.hrbcu.meeting.domain.TUserSleeping" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MspCommentGenerator, do not modify.
    -->
    update t_user_sleeping
    <set >
      <if test="receiveId != null" >
        receive_id = #{receiveId,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="roomNo != null" >
        room_no = #{roomNo,jdbcType=VARCHAR},
      </if>
      <if test="sleepDate != null" >
        sleep_date = #{sleepDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sleepOrder != null" >
        sleep_order = #{sleepOrder,jdbcType=INTEGER},
      </if>
      <if test="createStaffId != null" >
        create_staff_id = #{createStaffId,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateStaffId != null" >
        update_staff_id = #{updateStaffId,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <sql id="sql_where" >
    <where >
      <if test="receiveId != null" >
         and receive_id = #{receiveId,jdbcType=VARCHAR}
      </if>
      <if test="userId != null" >
        and user_id = #{userId,jdbcType=VARCHAR}
      </if>
      <if test="address != null" >
         and address = #{address,jdbcType=VARCHAR}
      </if>
      <if test="roomNo != null" >
         and room_no = #{roomNo,jdbcType=VARCHAR}
      </if>
      <if test="sleepDate != null" >
         and sleep_date = #{sleepDate,jdbcType=TIMESTAMP}
      </if>
      <if test="sleepOrder != null" >
         and sleep_order = #{sleepOrder,jdbcType=INTEGER}
      </if>
      <if test="createStaffId != null" >
         and create_staff_id = #{createStaffId,jdbcType=VARCHAR}
      </if>
      <if test="createTime != null" >
         and create_time = #{createTime,jdbcType=TIMESTAMP}
      </if>
      <if test="updateStaffId != null" >
         and update_staff_id = #{updateStaffId,jdbcType=VARCHAR}
      </if>
      <if test="updateTime != null" >
         and update_time = #{updateTime,jdbcType=TIMESTAMP}
      </if>
    </where>
  </sql>
  <select id="selectBySelective" resultMap="BaseResultMap" parameterType="com.zxy.hrbcu.meeting.domain.TUserSleeping" >
     select * from t_user_sleeping
    <include refid="sql_where" />
  </select>

  <select id="getSleepList" resultType="map" parameterType="map">
    <if test="address != null and address != ''">
      <bind name="addressPattern" value="'%' + address + '%'"/>
    </if>
    <if test="sleepDate != null and sleepDate != ''">
      <bind name="sleepDatePattern" value="sleepDate + '%'"/>
    </if>
    select
    u.id as userId,
    u.user_name as userName,
    u.phone as phone,
    r.id as receiveId,
    r.wx_no as wxNo,
    r.represent_college as representCollege,
    s.sleep_order as sleepOrder,
    s.address,
    s.room_no as roomNo,
    date_format(s.sleep_date, '%Y-%m-%d') as sleepDate,
    s.id as sleepId
    from t_user_sleeping s
    LEFT JOIN t_user_receive r ON s.receive_id = r.id
    LEFT JOIN t_u_user u ON r.user_id = u.id
    <where>
      <if test="meetingId != null and meetingId != ''">
        AND r.meeting_id = #{meetingId}
      </if>
      <if test="userName != null and userName != ''">
        AND u.user_name = #{userName}
      </if>
      <if test="representCollege != null and representCollege != ''">
        AND r.represent_college = #{representCollege}
      </if>
      <if test="address != null and address != ''">
        AND s.address LIKE #{addressPattern}
      </if>
      <if test="roomNo != null and roomNo != ''">
        AND s.room_no = #{roomNo}
      </if>
      <if test="sleepOrder != null and sleepOrder != ''">
        AND s.sleep_order = #{sleepOrder}
      </if>
      <if test="sleepDate != null and sleepDate != ''">
        AND s.sleep_date LIKE #{sleepDatePattern}
      </if>
    </where>
  </select>

  <delete id="deleteByIds" parameterType="map">
    delete from t_user_sleeping
    where 1=1
    AND id IN
    <foreach item="item" index="index" collection="idList"
             open="(" separator="," close=")">
      #{item}
    </foreach>
  </delete>
</mapper>